# AI 聊天助手文档中心

本目录包含**设计百宝箱** AI 聊天助手功能的所有相关文档。

---

## 📚 文档导航

### 🎯 核心文档（必读）

#### 1. [产品需求与技术设计规范](./ai-chat-spec.md) ⭐⭐⭐

**类型**: PRD (产品需求文档) + TDD (技术设计文档)
**阶段**: 访谈前的规划文档
**规模**: 1606行
**关键词**: **设计"做什么"** (What & Why)

**包含内容**:

- ✅ **项目背景**: 设计百宝箱的定位、AI聊天助手的角色与价值
- ✅ **产品哲学**: 为什么这样设计、解决什么问题
- ✅ **功能需求定义**: 完整的功能规范（18个章节）
  - 用户意图识别引擎设计
  - 澄清与交互策略
  - 资源呈现与展示策略
  - 零结果智能处理
  - 上下文与记忆策略
  - UI/UX设计规范
  - 测试策略与成功指标
- ✅ **技术栈选型**: Next.js, Supabase, 智谱AI 等

**适合人群**:

- 📖 产品经理：理解产品愿景和设计目标
- 📖 设计师：了解交互逻辑和UI规范
- 📖 开发人员：理解"为什么这样设计"

---

#### 2. [技术实施规格书](./technical-specification.md) ⭐⭐⭐ **🔥 开发必读**

**类型**: TIS (技术实施规格) + ADR (架构决策记录)
**阶段**: 访谈后的决策文档（基于32个深度访谈决策）
**规模**: 1327行
**关键词**: **决策"怎么做"** (How)

**包含内容**:

- ✅ **32个核心架构决策**（基于深度技术访谈）
  - 每个决策包含：具体实现代码 + 权衡分析表
  - 为什么选方案A不选方案B
- ✅ **核心技术实现**:
  - 意图识别引擎（置信度验证 + 上下文感知）
  - 泳道式分组（上下文锚定策略）
  - 零结果处理（主动预防机制）
  - 迭代优化（向量偏移导航）
  - 自适应澄清策略
- ✅ **技术架构**:
  - 三层缓存架构设计
  - 安全防护（XML沙箱 + 意图白名单）
  - 反馈机制（沉默投票 + 显式纠错）
  - MMR多样性算法
  - 会话记忆（状态锚定）
- ✅ **API端点设计** + **数据模型定义**
- ✅ **实施路线图**: MVP 4-5周详细计划
- ✅ **风险与缓解措施**
- ✅ **决策矩阵总览**: 32个决策速查表

**适合人群**:

- 💻 **开发人员**: 直接开始实施的权威参考
- 💻 技术负责人：架构决策依据
- 💻 代码审查：权衡分析参考

**⚠️ 与 ai-chat-spec.md 的关键区别**:

| 维度     | ai-chat-spec.md     | technical-specification.md   |
| -------- | ------------------- | ---------------------------- |
| **阶段** | 访谈前（规划）      | 访谈后（决策）               |
| **问题** | 做什么？为什么？    | 怎么做？为什么选A不选B？     |
| **内容** | 产品哲学 + 功能需求 | 架构决策 + 代码示例          |
| **深度** | "应该有意图识别"    | "如何实现意图识别（含代码）" |
| **类比** | 建筑设计蓝图        | 施工实施规范                 |

---

#### 3. [实施计划](./ai-chat-implementation-plan.md) ⭐⭐

**可执行的开发计划和进度追踪工具**

- **5个开发阶段**: 从前期准备到测试上线的详细拆解
- **任务描述**: 每个功能模块的具体任务说明
- **时间估算**: 小时/天级别的工时预估
- **风险识别**: 技术、产品、进度风险及应对措施
- **质量指标**: 代码覆盖率、性能指标、用户体验KPI

**适合人群**: 开发者、项目经理、技术负责人

---

#### 3. [开发检查清单](./checklist.md) ✅ ⭐⭐⭐

**每日工作进度追踪工具**

- **进度概览表**: 各阶段的完成度和负责人
- **详细checkbox**: 每个任务的可勾选检查项
- **验收标准**: 明确的完成判定条件
- **更新日志**: 记录每次进度更新

**📌 使用说明**:

- ✅ 每日工作前查看当前阶段任务
- ✅ 完成一个任务后勾选对应checkbox
- ✅ **完成一个阶段后，更新进度概览表并在此README标记**
- ✅ 每周五下午全面审查进度

**适合人群**: 开发者、项目经理（每日必用）

---

### 📖 历史文档（Legacy）

⚠️ **注意**: 以下文档为早期版本，内容可能已过时。仅供参考，请以最新的技术规范和实施计划为准。

#### 3. [AI聊天集成指南（Legacy）](../ai-chat-integration.legacy.md)

**早期版本的AI集成指南**

- API使用示例
- 数据流说明
- 常见问题解答

**状态**: 已过时，请参考 [技术规范 - 第12章](./ai-chat-spec.md#12-技术实现规范)

---

#### 4. [澄清流程说明（Legacy）](../clarification-flow.legacy.md)

**早期版本的澄清流程设计**

- 澄清场景分类
- 问题生成逻辑
- UI组件使用

**状态**: 已过时，请参考 [技术规范 - 第3章](./ai-chat-spec.md#3-澄清与交互策略)

---

#### 5. [实施文档（Legacy）](../AI_CHAT_IMPLEMENTATION.legacy.md)

**早期版本的实施记录**

- 原始实施思路
- 早期代码示例
- 历史决策记录

**状态**: 已过时，请参考最新的 [技术规范](./ai-chat-spec.md) 和 [实施计划](./ai-chat-implementation-plan.md)

---

## 📊 进度追踪

**最后更新**: 2026-01-22 | **当前阶段**: Phase 0 - 前期准备

### 阶段完成状态

| 阶段    | 状态      | 完成度 | 开始日期 | 完成日期 | 负责人  |
| ------- | --------- | ------ | -------- | -------- | ------- |
| Phase 0 | ⏳ 待开始 | 0%     | -        | -        | @待分配 |
| Phase 1 | ⏳ 待开始 | 0%     | -        | -        | @待分配 |
| Phase 2 | ⏳ 待开始 | 0%     | -        | -        | @待分配 |
| Phase 3 | ⏳ 待开始 | 0%     | -        | -        | @待分配 |
| Phase 4 | ⏳ 待开始 | 0%     | -        | -        | @待分配 |
| Phase 5 | ⏳ 待开始 | 0%     | -        | -        | @待分配 |

**状态说明**:

- ⏳ 待开始
- 🔄 进行中
- ⚠️ 阻塞
- ✅ 完成
- ❌ 已取消

### 📌 完成一个阶段后必做

当你完成一个阶段的所有任务后，请按以下步骤更新进度：

1. ✅ 在 [checklist.md](./checklist.md) 中：
   - 勾选该阶段所有任务和验收项
   - 更新进度概览表中的状态（⏳ → ✅）
   - 填写完成日期
   - 计算并更新完成度百分比

2. ✅ 在本README中：
   - 更新上方"阶段完成状态"表格
   - 更新"当前阶段"为下一阶段
   - 更新"最后更新"日期

3. ✅ 通知团队：
   - 在团队沟通渠道告知阶段完成
   - 提醒下一阶段的负责人准备

---

## 🚀 快速开始

### 🎯 我是开发人员，从哪里开始？

**推荐路径（最快）**:

1. 📖 **直接阅读**: [技术实施规格书](./technical-specification.md) ⭐⭐⭐
   - 这是开发的**权威参考**，包含所有架构决策和代码示例
   - 重点关注：第1章（核心架构）、第2章（技术实现）、第4章（数据模型）

2. 📖 **理解背景**: [产品需求与技术设计规范](./ai-chat-spec.md) 第0章
   - 快速了解项目背景和价值

3. 💻 **开始开发**: 参考技术实施规格书第5章（实施路线图）
   - 按照MVP范围逐个实现功能

**详细路径（全面）**:

1. [产品需求与技术设计规范](./ai-chat-spec.md) - 理解产品设计
2. [技术实施规格书](./technical-specification.md) - 理解架构决策
3. [实施计划](./ai-chat-implementation-plan.md) - 任务拆分
4. [开发检查清单](./checklist.md) - 进度追踪

---

### 📊 我是产品经理/设计师，从哪里开始？

1. 📖 **产品价值**: [产品需求与技术设计规范](./ai-chat-spec.md) 第0-1章
   - 项目背景、产品哲学、用户场景

2. 📖 **交互设计**: [产品需求与技术设计规范](./ai-chat-spec.md) 第3、9、13章
   - 澄清策略、新用户引导、UI/UX规范

3. 📖 **技术可行性**: [技术实施规格书](./technical-specification.md) 第1、8章
   - 核心架构决策、决策矩阵总览

---

### 👔 我是项目负责人，从哪里开始？

1. 📖 **可行性评估**: [可行性评估报告](./ai-chat-redesign-assessment.md)
   - 现状分析、Gap分析、风险评估

2. 📖 **技术决策**: [技术实施规格书](./technical-specification.md) 第8章
   - 32个核心决策速查

3. 📖 **实施计划**: [实施计划](./ai-chat-implementation-plan.md)
   - 工期估计、资源分配、风险管理

---

### 🔍 文档对比速查表

| 如果你想...        | 读这个文档             | 章节      |
| ------------------ | ---------------------- | --------- |
| **快速开始开发**   | 技术实施规格书         | 全文      |
| **理解产品愿景**   | 产品需求与技术设计规范 | 第0-1章   |
| **查看架构决策**   | 技术实施规格书         | 第1、8章  |
| **复制代码示例**   | 技术实施规格书         | 第2章     |
| **了解交互设计**   | 产品需求与技术设计规范 | 第3、13章 |
| **评估项目可行性** | 可行性评估报告         | 全文      |
| **分配开发任务**   | 实施计划               | 全文      |
| **追踪开发进度**   | 开发检查清单           | 全文      |

---

### 我是项目经理，如何追踪进度？

使用 [实施计划](./ai-chat-implementation-plan.md) 的检查清单：

```markdown
## 进度追踪表

| 阶段    | 任务     | 负责人 | 状态 | 完成度 | 预计完成时间 |
| ------- | -------- | ------ | ---- | ------ | ------------ |
| Phase 0 | 环境配置 | @张三  | ✅   | 100%   | 2026-01-15   |
| Phase 1 | 意图识别 | @李四  | 🔄   | 60%    | 2026-01-20   |
| Phase 1 | 向量搜索 | @王五  | ⏳   | 0%     | 2026-01-25   |
```

每周五下午进行进度检查，更新状态。

---

## 📋 文档更新日志

### 最新文档（当前版本）

| 日期       | 文档                           | 版本   | 更新内容                                         |
| ---------- | ------------------------------ | ------ | ------------------------------------------------ |
| 2026-01-23 | technical-specification.md     | v2.0.0 | **🔥 新增** - 基于32个深度访谈决策的技术实施规格 |
| 2026-01-23 | README.md                      | v2.0.0 | 更新文档导航，明确区分产品规范和实施规格         |
| 2026-01-22 | ai-chat-spec.md                | v1.0.0 | 初始版本，完整的产品需求与技术设计规范           |
| 2026-01-22 | ai-chat-implementation-plan.md | v1.0.0 | 初始版本，详细的实施计划                         |
| 2026-01-22 | checklist.md                   | v1.0.0 | 提取并创建独立的检查清单                         |

### 历史文档（Legacy）

| 文档                             | 状态      | 说明                                 |
| -------------------------------- | --------- | ------------------------------------ |
| AI_CHAT_IMPLEMENTATION.legacy.md | ⚠️ 已过时 | 早期实施文档，部分内容与当前规划不符 |
| ai-chat-integration.legacy.md    | ⚠️ 已过时 | 早期集成指南，API设计已变更          |
| clarification-flow.legacy.md     | ⚠️ 已过时 | 早期澄清流程，交互策略已优化         |

---

## ❓ 常见问题

### Q1: ai-chat-spec.md 和 technical-specification.md 有什么区别？

这是**最容易混淆**的两个文档！简单来说：

| 维度         | ai-chat-spec.md      | technical-specification.md       |
| ------------ | -------------------- | -------------------------------- |
| **文档类型** | PRD + TDD            | TIS + ADR                        |
| **创建阶段** | 访谈前（规划）       | 访谈后（决策）                   |
| **核心问题** | 做什么？为什么？     | 怎么做？为什么选A不选B？         |
| **内容重点** | 产品哲学 + 功能需求  | 架构决策 + 代码示例              |
| **技术深度** | "应该有意图识别功能" | "如何实现意图识别（含完整代码）" |
| **决策记录** | 无（仅规划）         | ✅ 32个决策 + 权衡分析           |
| **类比**     | 建筑设计蓝图         | 施工实施规范                     |

**应该先读哪个？**

- 🎯 **开发人员**: 直接读 `technical-specification.md`
- 📊 **产品/设计**: 先读 `ai-chat-spec.md`
- 👔 **项目管理者**: 两个都读，但先读 `ai-chat-spec.md`

### Q2: 为什么需要两个文档？

- `ai-chat-spec.md`: 回答"**为什么需要AI聊天**"和"**它应该是什么样**"
  - 例如："我们需要自适应澄清，因为用户不喜欢被问太多问题"

- `technical-specification.md`: 回答"**如何实现自适应澄清**"
  - 例如："使用置信度阈值0.7，结合会话历史检测挫折信号"

### Q3: 文档会过时吗？

- ✅ `technical-specification.md` - 开发过程中可能微调（架构决策通常稳定）
- ✅ `checklist.md` - 实时更新进度
- 📌 `ai-chat-spec.md` - 相对稳定（产品需求已确认）
- 📌 `ai-chat-implementation-plan.md` - 根据实际进度调整工期

### Q4: 我只需要开发功能，应该读哪个？

**答案**: 只需要 `technical-specification.md` ✅

这是你的**唯一权威参考**，包含：

- ✅ 所有架构决策
- ✅ 代码实现示例
- ✅ API设计
- ✅ 数据模型

如果你有时间，可以快速浏览 `ai-chat-spec.md` 第0章了解背景。

---

## 🔗 相关资源

- **项目主页**: [Design Treasure Box](../../README.md)
- **技术栈文档**: [Next.js](https://nextjs.org/docs) | [React](https://react.dev/) | [智谱AI](https://open.bigmodel.cn/dev/api)
- **设计规范**: [shadcn/ui](https://ui.shadcn.com/) | [Tailwind CSS](https://tailwindcss.com/docs)

---

## 📞 联系方式

- **项目负责人**: [Your Name]
- **技术负责人**: [Tech Lead Name]
- **产品负责人**: [Product Manager Name]

---

**最后更新**: 2026-01-23
